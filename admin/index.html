<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Admin prototype</title>
	
	<link rel="stylesheet" type="text/css" href="css/reset.css" />
	<link rel="stylesheet" type="text/css" href="css/basic.css" />
	
	<script src="js/lib/jquery-1.6.2.js"></script>
	<script src="js/lib/jquery.tmpl.js"></script>
	<script src="js/lib/jquery.cookie.js"></script>
	<script src="js/lib/jquery-ui-1.8.14.custom.js"></script>
	<script src="js/lib/knockout-1.2.1.js"></script>
	<script src="js/lib/knockout.mapping-latest.js"></script>
	<link rel="stylesheet" type="text/css" href="css/themes/smoothness/jquery-ui-1.8.14.custom.css" />
	
	<script src="js/admin.js"></script>
	<script>
	$(function() {
		var admin = new Bongo.AdminTool('/admin/backend/index.php');
		admin.init();
	});
	</script>
</head>

<body id="home">

<form id="login-form" class="loginbox">
	<p id="login-form-message"></p>
	<p>Username: <input type="text" name="name" /></p>
	<p>Password: <input type="password" name="password" /></p>
	<button id="login-form-button">Log In</button>
</form>

<div id="admin-tool" style="display: none">
	<h1>Bongo Administration</h1>

	<div>
		<button id="admin-logout" style="float: right;">Log Out</button>
		<button id="admin-save">Save changes</button>
	</div>

	<div id="admin-tabs">
		<ul>
			<li><a href="#tabs-domains">Domains</a></li>
			<li><a href="#tabs-agents">Global settings</a></li>
			<li><a href="#tabs-anti">Antispam &amp; virus</a></li>
			<li><a href="#tabs-access">POP &amp; IMAP</a></li>
			<li><a href="#tabs-smtp">SMTP</a></li>
			<li><a href="#tabs-queue">Internal queue</a></li>
		</ul>
		<div id="tabs-domains">
			<h2>Domains available</h2>
			
			<ul data-bind="template: { name: 'tmp_domain_list', foreach: queue.domains }">
			</ul>
			
			<div>
				<p>Username mapping: <input type="text" data-bind="value: selected_domain" /></p>
			</div>
		</div>
		<div id="tabs-agents">
			
			<h2>Agents enabled on the system</h2>
			
			<table>
				<thead>
					<tr>
						<th>Agent Name</th>
						<th>Startup Priority</th>
						<th>Enabled?</th>
					</tr>
				</thead>
				<tbody data-bind="template: { name: 'tmp_agent_list', foreach: manager.agents }">
				</tbody>
			</table>
			
			<br />
			
			<table>
				<tr>
					<td>System hostname:</td>
					<td><input type="text" data-bind="value: global.hostname" /></td>
				</tr><tr>
					<td>Host address:</td>
					<td><input type="text" data-bind="value: global.hostaddr" /></td>
				</tr><tr>
					<td>Postmaster:</td>
					<td><input type="text" data-bind="value: global.postmaster" /></td>
				</tr>
			</table>
		</div>
		<div id="tabs-anti">
			<h2>Antispam</h2>
			
			<table>
				<tr>
					<td>Timeout:</td>
					<td><input type="text" data-bind="value: antispam.timeout" /></td>
				</tr><tr>
					<td>Hosts:</td>
					<td>
						TODO
					</td>
				</tr>
			</table>
			
			<h2>Antivirus</h2>
			
			<table>
				<tr>
					<td>Timeout:</td>
					<td><input type="text" data-bind="value: antispam.timeout" /></td>
				</tr><tr>
					<td>Hosts:</td>
					<td>
						TODO
					</td>
				</tr>
			</table>
		</div>
		<div id="tabs-access">
			<h2>POP 3</h2>
			
			<table>
				<tr>
					<td>Port:</td>
					<td><input type="text" data-bind="value: pop3.port" /></td>
				</tr><tr>
					<td>Port (SSL):</td>
					<td><input type="text" data-bind="value: pop3.port_ssl" /></td>
				</tr>
			</table>
			
			<h2>IMAP</h2>
			
			<table>
				<tr>
					<td>Port:</td>
					<td><input type="text" data-bind="value: imap.port" /></td>
				</tr><tr>
					<td>Port (SSL):</td>
					<td><input type="text" data-bind="value: imap.port_ssl" /></td>
				</tr><tr>
					<td>Max threads:</td>
					<td><input type="text" data-bind="value: imap.threads_max" /></td>
				</tr>
			</table>
		</div>
		
		<div id="tabs-smtp">
			<table>
				<tr>
					<td>Port:</td>
					<td><input type="text" data-bind="value: smtp.port" /></td>
				</tr><tr>
					<td>Port (SSL):</td>
					<td><input type="text" data-bind="value: smtp.port_ssl" /></td>
				</tr><tr>
					<td>Use relay host:</td>
					<td><input type="checkbox" data-bind="checked: smtp.use_relay_host" /></td>
				</tr><tr data-bind="visible: smtp.use_relay_host">
					<td>Relay host:</td>
					<td><input type="text" data-bind="value: smtp.relay_host" /></td>
				</tr>
			</table>
		</div>
		
		<div id="tabs-queue">
			<table>
				<tr>
					<td>Port:</td>
					<td><input type="text" data-bind="value: queue.port" /></td>
				</tr><tr>
					<td>Debug mode:</td>
					<td><input type="checkbox" data-bind="checked: queue.debug" /></td>
				</tr><tr>
					<td>Forward undeliverables:</td>
					<td><input type="checkbox" data-bind="checked: queue.forwardundeliverable_enabled" /></td>
				</tr><tr data-bind="visible: queue.forwardundeliverable_enabled">
					<td>.... to:</td>
					<td><input type="text" data-bind="value: queue.forwardundeliverable_to" /></td>
				</tr><tr>
					<td>Return bounces:</td>
					<td><input type="checkbox" data-bind="checked: queue.bouncereturn" /></td>
				</tr><tr>
					<td>CC Postmaster on bounces:</td>
					<td><input type="checkbox" data-bind="checked: queue.bounceccpostmaster" /></td>
				</tr>
			</table>
		</div>
	</div>
</div>

<script type="text/html" id="tmp_agent_list">
	<tr>
		<td data-bind="text: name">Name</td>
		<td><input size="3" data-bind="value: pri" value="-1" /></td>
		<td><input type="checkbox" data-bind="checked: enabled" /></td>
	</tr>
</script>

<script type="text/html" id="tmp_domain_list">
	<li>
		<a data-bind="text: $data">domain</a>
	</li>
</script>

</body>
</html>
